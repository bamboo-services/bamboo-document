---
title: æ ¸å¿ƒè¯´æ˜
description: Bamboo Base æ•´ä½“æ¶æ„è®¾è®¡ä¸æ¨¡å—è¯´æ˜
icon: Layers
---

import { TypeTable } from '@/components/type-table';

# æ ¸å¿ƒæ¶æ„

## é¡¹ç›®æ¦‚è¿°

**æ¨¡å—åç§°**: `github.com/bamboo-services/bamboo-base-go`

**Go ç‰ˆæœ¬**: 1.24+

**é¡¹ç›®å®šä½**: Go è¯­è¨€åŸºç¡€æ¡†æ¶åº“ï¼Œä¸º Bamboo æœåŠ¡æä¾›æ ¸å¿ƒåŠŸèƒ½æ”¯æŒï¼ŒåŒ…æ‹¬æ—¥å¿—ã€é”™è¯¯å¤„ç†ã€é›ªèŠ±ç®—æ³• ID ç”Ÿæˆã€éªŒè¯å™¨ã€ä¸­é—´ä»¶ç­‰åŸºç¡€è®¾æ–½ã€‚

## åŒ…ç»“æ„è¯´æ˜

```
github.com/bamboo-services/bamboo-base-go/
â”‚
â”œâ”€â”€ defined/                    # ğŸ·ï¸ å®šä¹‰å±‚ â€” é›¶ä¾èµ–çš„å¸¸é‡ä¸ç±»å‹
â”‚   â”œâ”€â”€ context/                #   ä¸Šä¸‹æ–‡é”®å¸¸é‡ (xCtx)
â”‚   â””â”€â”€ env/                    #   ç¯å¢ƒå˜é‡å¸¸é‡ (xEnv)
â”‚
â”œâ”€â”€ common/                     # ğŸ§± å…¬å…±å±‚ â€” å¯ç‹¬ç«‹ä½¿ç”¨çš„åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ base_response.go        #   ç»Ÿä¸€å“åº”ç»“æ„ä½“ (xBase)
â”‚   â”œâ”€â”€ error/                  #   é”™è¯¯ç å’Œé”™è¯¯å¤„ç† (xError)
â”‚   â”œâ”€â”€ log/                    #   æ—¥å¿—ç³»ç»Ÿ (xLog)
â”‚   â”œâ”€â”€ snowflake/              #   é›ªèŠ±ç®—æ³• ID ç”Ÿæˆ (xSnowflake)
â”‚   â”œâ”€â”€ utility/                #   å·¥å…·å‡½æ•° (xUtil)
â”‚   â”‚   â””â”€â”€ context/            #   ä¸Šä¸‹æ–‡å·¥å…· (xCtxUtil)
â”‚   â””â”€â”€ validator/              #   éªŒè¯å™¨ (xVaild)
â”‚
â”œâ”€â”€ major/                      # ğŸš€ ä¸»æ¡†æ¶å±‚ â€” ä¾èµ– Gin çš„æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ cache/                  #   ç¼“å­˜æŠ½è±¡ (xCache)
â”‚   â”œâ”€â”€ helper/                 #   æ ¸å¿ƒä¸­é—´ä»¶ (xHelper)
â”‚   â”œâ”€â”€ hook/                   #   é’©å­å‡½æ•° (xHook)
â”‚   â”œâ”€â”€ http/                   #   HTTP å¸¸é‡ (xHttp)
â”‚   â”œâ”€â”€ main/                   #   æœåŠ¡è¿è¡Œæ—¶ (xMain)
â”‚   â”œâ”€â”€ middleware/             #   ä¸šåŠ¡ä¸­é—´ä»¶ (xMiddle)
â”‚   â”œâ”€â”€ models/                 #   æ•°æ®æ¨¡å‹åŸºç±» (xModels)
â”‚   â”œâ”€â”€ register/               #   åº”ç”¨æ³¨å†Œå’Œåˆå§‹åŒ– (xReg)
â”‚   â”œâ”€â”€ result/                 #   å“åº”ç»“æœå¤„ç† (xResult)
â”‚   â””â”€â”€ route/                  #   è·¯ç”±å¤„ç† (xRoute)
â”‚
â””â”€â”€ plugins/                    # ğŸ”Œ æ’ä»¶å±‚ â€” å¯é€‰æ‰©å±•
    â””â”€â”€ grpc/                   #   gRPC æ”¯æŒ
        â”œâ”€â”€ constant/           #     gRPC å¸¸é‡
        â”œâ”€â”€ generate/           #     Proto ç”Ÿæˆè¾…åŠ©
        â”œâ”€â”€ interceptor/        #     æ‹¦æˆªå™¨
        â”œâ”€â”€ middleware/         #     gRPC ä¸­é—´ä»¶
        â”œâ”€â”€ result/             #     gRPC å“åº”å¤„ç†
        â””â”€â”€ runner/             #     gRPC è¿è¡Œæ—¶
```

## åŒ…å¯¼å…¥åˆ«å

### defined å±‚ï¼ˆé›¶ä¾èµ–ï¼‰

<TypeTable
  type={{
    'xCtx': {
      description: 'ä¸Šä¸‹æ–‡é”®å¸¸é‡å®šä¹‰',
      type: '.../defined/context',
      required: true,
    },
    'xEnv': {
      description: 'ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œç±»å‹å®‰å…¨çš„è¯»å–å‡½æ•°',
      type: '.../defined/env',
      required: true,
    },
  }}
/>

### common å±‚ï¼ˆåŸºç¡€è®¾æ–½ï¼‰

<TypeTable
  type={{
    'xBase': {
      description: 'å…¬å…±å±‚æ ¹åŒ…ï¼Œç»Ÿä¸€å“åº”ç»“æ„ä½“ BaseResponse',
      type: '.../common',
      required: true,
    },
    'xError': {
      description: 'é”™è¯¯ç å®šä¹‰å’Œé”™è¯¯å¤„ç†',
      type: '.../common/error',
      required: true,
    },
    'xLog': {
      description: 'æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒå½©è‰²æ§åˆ¶å°å’Œ JSON æ–‡ä»¶è¾“å‡º',
      type: '.../common/log',
      required: true,
    },
    'xSnowflake': {
      description: 'é›ªèŠ±ç®—æ³• ID ç”Ÿæˆï¼Œæ”¯æŒä¸šåŠ¡åŸºå› ',
      type: '.../common/snowflake',
      required: true,
    },
    'xUtil': {
      description: 'é€šç”¨å·¥å…·å‡½æ•°',
      type: '.../common/utility',
      required: true,
    },
    'xCtxUtil': {
      description: 'ä¸Šä¸‹æ–‡å·¥å…·å‡½æ•°',
      type: '.../common/utility/context',
      required: true,
    },
    'xVaild': {
      description: 'éªŒè¯å™¨æ‰©å±•ï¼Œè‡ªå®šä¹‰è§„åˆ™å’Œä¸­æ–‡ç¿»è¯‘',
      type: '.../common/validator',
      required: true,
    },
  }}
/>

### major å±‚ï¼ˆä¸»æ¡†æ¶ï¼‰

<TypeTable
  type={{
    'xReg': {
      description: 'åº”ç”¨æ³¨å†Œå’Œåˆå§‹åŒ–',
      type: '.../major/register',
      required: true,
    },
    'xMain': {
      description: 'æœåŠ¡è¿è¡Œæ—¶ï¼ˆç»Ÿä¸€å¯åŠ¨ã€ä¿¡å·ç›‘å¬ã€ä¼˜é›…å…³é—­ï¼‰',
      type: '.../major/main',
      required: true,
    },
    'xHelper': {
      description: 'æ ¸å¿ƒä¸­é—´ä»¶ï¼ˆè¯·æ±‚ä¸Šä¸‹æ–‡ã€Panic æ¢å¤ã€HTTP æ—¥å¿—ï¼‰',
      type: '.../major/helper',
      required: true,
    },
    'xMiddle': {
      description: 'ä¸šåŠ¡ä¸­é—´ä»¶ï¼ˆCORSã€å“åº”å¤„ç†ç­‰ï¼‰',
      type: '.../major/middleware',
      required: true,
    },
    'xResult': {
      description: 'å“åº”ç»“æœå¤„ç†å‡½æ•°',
      type: '.../major/result',
      required: true,
    },
    'xRoute': {
      description: 'è·¯ç”±å¤„ç†ï¼ˆ404ã€405ï¼‰',
      type: '.../major/route',
      required: true,
    },
    'xModels': {
      description: 'GORM å®ä½“åŸºç±»ï¼Œè‡ªåŠ¨ç”Ÿæˆé›ªèŠ± ID',
      type: '.../major/models',
      required: true,
    },
    'xCache': {
      description: 'ç¼“å­˜æŠ½è±¡',
      type: '.../major/cache',
      required: true,
    },
    'xHook': {
      description: 'Redis é’©å­ï¼Œè‡ªåŠ¨æ·»åŠ é”®å‰ç¼€',
      type: '.../major/hook',
      required: true,
    },
    'xHttp': {
      description: 'HTTP ç›¸å…³å¸¸é‡ï¼ˆè¯·æ±‚å¤´ç­‰ï¼‰',
      type: '.../major/http',
      required: true,
    },
  }}
/>

### plugins å±‚ï¼ˆå¯é€‰æ‰©å±•ï¼‰

<TypeTable
  type={{
    'xGrpcRunner': {
      description: 'gRPC è¿è¡Œæ—¶',
      type: '.../plugins/grpc/runner',
      required: false,
    },
    'xGrpcInterface': {
      description: 'gRPC æ‹¦æˆªå™¨',
      type: '.../plugins/grpc/interceptor',
      required: false,
    },
  }}
/>

## æ¨¡å—ä¾èµ–å…³ç³»

<Mermaid
  chart="
graph TD
    subgraph defined[defined å±‚]
        xCtx[xCtx<br/>ä¸Šä¸‹æ–‡å¸¸é‡]
        xEnv[xEnv<br/>ç¯å¢ƒå˜é‡]
    end

    subgraph common[common å±‚]
        xBase[xBase<br/>BaseResponse]
        xError[xError<br/>é”™è¯¯å¤„ç†]
        xLog[xLog<br/>æ—¥å¿—ç³»ç»Ÿ]
        xSnowflake[xSnowflake<br/>é›ªèŠ±ç®—æ³•]
        xCtxUtil[xCtxUtil<br/>ä¸Šä¸‹æ–‡å·¥å…·]
        xVaild[xVaild<br/>éªŒè¯å™¨]
    end

    subgraph major[major å±‚]
        xReg[xReg<br/>æ³¨å†Œä¸­å¿ƒ]
        xResult[xResult<br/>å“åº”å¤„ç†]
        xModels[xModels<br/>æ•°æ®æ¨¡å‹]
        xHelper[xHelper<br/>æ ¸å¿ƒä¸­é—´ä»¶]
        xMain[xMain<br/>è¿è¡Œæ—¶]
    end

    subgraph plugins[plugins å±‚]
        xGrpc[xGrpc<br/>gRPC æ‰©å±•]
    end

    xBase --> xError
    xCtxUtil --> xCtx
    xCtxUtil --> xSnowflake

    xReg --> xLog
    xReg --> xSnowflake
    xReg --> xHelper
    xReg --> xVaild
    xResult --> xBase
    xResult --> xError
    xModels --> xSnowflake
    xMain --> xReg

    xGrpc --> xLog
    xGrpc --> xError"
/>

## åˆå§‹åŒ–æµç¨‹

<Mermaid
  chart="
flowchart TD
    A[Register] --> B[ConfigInit<br/>åŠ è½½ .env é…ç½®]
    B --> C[LoggerInit<br/>åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ]
    C --> D[SnowflakeInit<br/>åˆå§‹åŒ–é›ªèŠ±ç®—æ³•èŠ‚ç‚¹]
    D --> E[EngineInit<br/>åˆ›å»º Gin å¼•æ“]
    E --> F[injectContext<br/>åˆå¹¶åˆå§‹åŒ–ä¸Šä¸‹æ–‡]
    F --> G[è¿”å› *Reg]"
/>

```go title="main.go"
package main

import (
    "context"

    xReg "github.com/bamboo-services/bamboo-base-go/major/register"
)

func main() {
    // [!code highlight:2]
    // ä¸€é”®åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶
    reg := xReg.Register(context.Background(), nil)

    // æ³¨å†Œè·¯ç”±...

    // [!code highlight]
    reg.Serve.Run(":8080")
}
```

## æ ¸å¿ƒä¾èµ–

| ä¾èµ– | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| `gin-gonic/gin` | v1.10+ | Web æ¡†æ¶ |
| `go-playground/validator` | v10.30+ | éªŒè¯å™¨ |
| `joho/godotenv` | v1.5+ | ç¯å¢ƒå˜é‡åŠ è½½ |
| `redis/go-redis` | v9.14+ | Redis å®¢æˆ·ç«¯ |
| `gorm.io/gorm` | v1.30+ | ORM æ¡†æ¶ |

## è®¾è®¡åŸåˆ™

1. **åˆ†å±‚è§£è€¦** - å››å±‚æ¶æ„ï¼ˆdefined â†’ common â†’ major â†’ pluginsï¼‰ï¼ŒæŒ‰éœ€å¼•å…¥
2. **å•ä¸€èŒè´£** - æ¯ä¸ªåŒ…åªè´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½é¢†åŸŸ
3. **ç»Ÿä¸€å‘½å** - æ‰€æœ‰åŒ…ä½¿ç”¨ `x` å‰ç¼€åˆ«åï¼Œä¾¿äºè¯†åˆ«
4. **çº¦å®šä¼˜äºé…ç½®** - æä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œå‡å°‘é…ç½®è´Ÿæ‹…
5. **é“¾è·¯è¿½è¸ª** - è¯·æ±‚ ID è´¯ç©¿æ•´ä¸ªè¯·æ±‚ç”Ÿå‘½å‘¨æœŸ

## ä¸‹ä¸€æ­¥

<Cards>
  <Card title="å¿«é€Ÿå¼€å§‹" href="/docs/bamboo-base-go/core/init" />
  <Card title="å“åº”å¤„ç†" href="/docs/bamboo-base-go/core/result/result" />
</Cards>
