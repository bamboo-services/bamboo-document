---
title: 配置初始化
description: ConfigInit 从 .env 文件加载环境变量
icon: Settings
---

# 配置初始化

`ConfigInit` 方法从 `.env` 文件加载环境变量到系统环境中。

## ConfigInit

```go title="register_config.go"
// [!code highlight]
func (r *Reg) ConfigInit()
```

**实现：**

```go title="register_config.go"
func (r *Reg) ConfigInit() {
    // [!code highlight]
    // 加载 .env 文件到环境变量（忽略不存在的错误）
    _ = godotenv.Load()
}
```

## 配置文件

在项目根目录创建 `.env` 文件：

```bash title=".env"
# 调试模式
DEBUG=true

# 雪花算法配置
SNOWFLAKE_DATACENTER_ID=1
SNOWFLAKE_NODE_ID=1

# 服务配置
SERVER_PORT=8080
```

## 读取配置

使用 `xEnv` 包读取环境变量：

```go
import xEnv "github.com/bamboo-services/bamboo-base-go/defined/env"

// [!code highlight:2]
// 读取布尔值
debug := xEnv.GetEnvBool(xEnv.Debug, false)

// [!code highlight:2]
// 读取字符串
port := xEnv.GetEnvString("SERVER_PORT", "8080")

// [!code highlight:2]
// 读取整数
nodeID := xEnv.GetEnvInt("SNOWFLAKE_NODE_ID", 1)
```

## 预定义环境变量

| 变量名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `DEBUG` | bool | `false` | 调试模式开关 |
| `SNOWFLAKE_DATACENTER_ID` | int | 自动生成 | 数据中心 ID |
| `SNOWFLAKE_NODE_ID` | int | 自动生成 | 节点 ID |

## 注意事项

- `.env` 文件不存在时不会报错，会静默忽略
- 环境变量优先级：系统环境变量 > `.env` 文件
- 建议将 `.env` 添加到 `.gitignore`，避免敏感信息泄露

## 下一步

<Cards>
  <Card title="日志初始化" href="/docs/bamboo-base-go/core/init/logger" />
  <Card title="雪花算法初始化" href="/docs/bamboo-base-go/core/init/snowflake" />
</Cards>
